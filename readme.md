<h1>Приложение: система управления заказами в ресторане</h1>
<h2>Серикова Виктория БПИ223</h2>

<h2>Инструкция по запуску</h2>
Сбилдить докер файл с помощью команды в терминале:
```bash
docker build -t my_image_name .
```

Запустить докер-файл с помощью команды в терминале:
```bash
docker run -p 3306:3306 -e MYSQL_ROOT_PASSWORD=root_password -e MYSQL_DATABASE=my_database -e MYSQL_USER=my_user -e MYSQL_PASSWORD=my_password my_image_name
```
После того как в терминале появится сообщение о том, что база данных готова к работе (/usr/sbin/mysqld: ready for connections), можно запускать приложение.
Если вдруг база данных не запустилась через докер, нужно развернуть ее локально любым другим способом.

Тестовые данные для базы данных:
```sql
INSERT INTO dishes (name, price, description, timeToCook, quantity, rating, ratingCount)
VALUES ('Борщ', 300, 'Традиционный русский суп с свеклой, картошкой, мясом и сметаной', 20, 20, 0, 0);

INSERT INTO dishes (name, price, description, timeToCook, quantity, rating, ratingCount)
VALUES ('Пельмени', 250, 'Пельмени из мяса с сочным бульоном, подается с сметаной и зеленью', 10, 25, 0, 0);

INSERT INTO dishes (name, price, description, timeToCook, quantity, rating, ratingCount)
VALUES ('Цезарь с креветками', 1200, 'Цезарь с креветками, романо-летуком, гренками и соусом', 15, 15, 0, 0);

INSERT INTO dishes (name, price, description, timeToCook, quantity, rating, ratingCount)
VALUES ('Сырники с вареньем', 350, 'Пышные сырники с джемом или вареньем на выбор', 10, 30, 0, 0);

INSERT INTO dishes (name, price, description, timeToCook, quantity, rating, ratingCount)
VALUES ('Шашлык из свинины', 1500, 'Ароматные шашлыки из свинины, подается с луком и соусом', 30, 20, 0, 0);

INSERT INTO dishes (name, price, description, timeToCook, quantity, rating, ratingCount)
VALUES ('Салат "Греческий"', 600, 'Салат с огурцом, помидорами, перцем, маслинами и фетой', 10, 10, 0, 0);
```

<h2>Функциональные требования</h2>
> Система авторизации пользователей: Разработана система авторизации для двух типов пользователей:
> - Администратор
> - Посетитель
>
> Реализована возможность регистрации и авторизации пользователей. Пароли шифруются, данные о пользователях хранятся в базе данных.

> Меню администратора соответствует требованиям: 
> - Администратор может добавлять блюда в меню 
> - Администратор может удалять блюда из меню
> - Администратор может устанавливать количество блюд, цену и сложность выполнения (время, которое оно будет готовиться).
> - Администратор может просматривать статистику
> - Администратор может просматривать отзывы
> - Администратор может просматривать кассу

> Меню посетителя соответствует требованиям:
> - Посетитель может просматривать меню
> - Посетитель может создать заказ
> - Посетитель может добавлять блюда в заказ
> - Посетитель может оформить заказ
> - Посетитель может отменить заказ
> - Посетитель может посмотреть статус заказа
> - Посетитель может посмотреть свой заказ
> - Посетитель может оплатить заказ наличными или картой
> - Посетитель может оставить отзыв

> Заказы обрабатываются в отдельных потоках:
> - При запуске приложения создается кухня с пулом потоков (3), ожидающих заказы
> - Оформленный заказ добавляется в блокирующую очередь, из которой потоки кухни забирают заказы и готовят их
> - Потоки симулируют готовку блюд, ожидая время, указанное в меню для каждого блюда
> - Заказы, находящиеся в процессе готовки на момент запуска приложения также готовятся, в конструкторе кухни очередь заполняется заказами из базы данных с пометкой "готовится", это позволяет продолжить готовку заказов после перезапуска приложения
> - По завершении готовки заказа, его статус меняется на "готов", а в консоли выводится сообщение о готовности заказа для посетителя с его id


<h2>Используемые паттерны</h2>
> - Singleton (Многопоточная реализация): для работы с базой данных
> - Factory: для создания Меню
> - Builder: для создания блюд, заказов..
> - Iterator: для перебора блюд в меню, для перебора заказов в репозитории заказов, для перебора отзывов в репозитории отзывов

<h2>Подробнее о приложении и особенности реализации</h2>
> - Можно входить и выходить из аккаунта, менять аккаунты, регистрироваться и авторизоваться, блюда все равно будут продолжать готовиться, а заказы менять свой статус
> - Один пользователь может иметь только один активный заказ
> - Чтобы создать заказ, нужно выбрать пункт 1 в меню посетителя
> - После создания заказа, нужно заполнить его блюдами, т.к. пустой заказ оформить нельзя.
> - Предусмотрены проверки на корректность ввода данных
> - Приложение работает с базой данных, поэтому после перезапуска приложения данные о пользователях, блюдах, заказах, отзывах сохраняются
> - Заказ можно отменить только до его готовности.
> - После оплаты или приготовления заказа, его нельзя отменить
> - После добавления блюда в заказ, количество этого блюда в меню уменьшается
> - После отмены заказа, количество блюд в меню восстанавливается
> - После отмены заказа, он удаляется из базы данных
> - Касса хранит наличные и карты, способ оплаты заказа можно выбрать
> - После оплаты заказа, его статус меняется на "оплачен" и это финальный статус заказа
> - После оплаты заказа, пользователь может оставить отзыв и оценить все блюда в заказе
> - После оставления отзыва, он сохраняется в базе данных, потом все отзывы можно просмотреть в меню администратора
> - Администратор не может менять цену или время приготовления блюда, если есть хоть один активный заказ

<h2>Особенности многопоточной реализации</h2>
> - Потоки кухни работают с блокирующей очередью заказов, в которую добавляются заказы, оформленные посетителями
> - Одновременно работает 3 потока кухни, ожидающих заказы
> - Потоки кухни работают с базой данных, чтобы получить заказы, которые готовятся на момент запуска приложения
> - Приоритет построен на принципе "первым пришел - первым обслужен", поэтому потоки кухни забирают заказы из очереди в порядке их добавления
> - Потоки кухни симулируют готовку блюд, ожидая время, указанное в меню для каждого блюда
> - После готовки заказа, его статус меняется на "готов", а в консоли выводится сообщение о готовности заказа для посетителя с его id